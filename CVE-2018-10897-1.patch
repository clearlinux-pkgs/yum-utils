From 7554c0133eb830a71dc01846037cc047d0acbc2c Mon Sep 17 00:00:00 2001
From: Michal Domonkos <mdomonko@redhat.com>
Date: Thu, 19 Jul 2018 15:17:03 +0200
Subject: [PATCH] reposync: refactor: sanitize remote_path usage

For better readability (remote_path == relativepath).
---
 reposync.py | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

diff --git a/reposync.py b/reposync.py
index de06127..5c2691b 100755
--- a/reposync.py
+++ b/reposync.py
@@ -251,8 +251,7 @@ def main():
 
             download_set = {}
             for pkg in download_list:
-                remote = pkg.returnSimple('relativepath')
-                rpmname = os.path.basename(remote)
+                rpmname = os.path.basename(pkg.remote_path)
                 download_set[rpmname] = 1
 
             for pkg in current_pkgs:
@@ -300,8 +299,7 @@ def main():
         local_size  = 0
         if not opts.urls:
             for pkg in download_list:
-                remote = pkg.returnSimple('relativepath')
-                local = local_repo_path + '/' + remote
+                local = os.path.join(local_repo_path, pkg.remote_path)
                 sz = int(pkg.returnSimple('packagesize'))
                 if os.path.exists(local) and os.path.getsize(local) == sz:
                     continue
@@ -315,8 +313,7 @@ def main():
         for pkg in download_list:
             n = n + 1
             repo = my.repos.getRepo(pkg.repoid)
-            remote = pkg.returnSimple('relativepath')
-            local = local_repo_path + '/' + remote
+            local = os.path.join(local_repo_path, pkg.remote_path)
             localdir = os.path.dirname(local)
             if not os.path.exists(localdir):
                 os.makedirs(localdir)
@@ -334,7 +331,7 @@ def main():
                     baseurl = repo.urls[0] + '/'
                 else:
                     baseurl = repo.urls[0]
-                    url = urljoin(baseurl,remote)
+                    url = urljoin(baseurl, pkg.remote_path)
                     print '%s' % url
                 continue
     
